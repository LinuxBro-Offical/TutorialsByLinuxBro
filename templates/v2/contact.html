{% load static %}
<!DOCTYPE html>
<html lang="en-US" dir="ltr">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Contact Us - LINUX ! BRO</title>
        <link rel="apple-touch-icon" sizes="180x180" href="{% static 'v2/img/favicons/apple-touch-icon.png'%}">
        <link rel="icon" type="image/png" sizes="32x32" href="{% static 'v2/img/favicons/favicon-32x32.png'%}">
        <link rel="icon" type="image/png" sizes="16x16" href="{% static 'v2/img/favicons/favicon-16x16.png'%}">
        <link rel="shortcut icon" type="image/x-icon" href="{% static 'v2/img/favicons/favicon.ico'%}">
        <link rel="manifest" href="{% static 'v2/img/favicons/manifest.json'%}">
        <meta name="msapplication-TileImage" content="{% static 'v2/img/favicons/mstile-150x150.png'%}">
        <meta name="theme-color" content="#ffffff">
        <script src="{% static 'v2/vendors/overlayscrollbars/OverlayScrollbars.min.js'%}"></script>
        <link href="{% static 'v2/vendors/swiper/swiper-bundle.min.css'%}" rel="stylesheet">
        <link href="{% static 'v2/css/theme.min.css'%}" rel="stylesheet" />
        <link href="{% static 'v2/css/user.min.css'%}" rel="stylesheet" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@100;200;300;400;500;600;700;900&amp;family=Roboto:wght@100;300;400;500;700;900&amp;display=swap" rel="stylesheet">
        <style>
            /* Toastr Custom Styles */
            .toast-success {
                background-color: #000000;
                color: #f0f0f0;
                border-left: 5px solid #fb641b;
                font-family: 'Inter', sans-serif;
                font-weight: 500;
                box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
            }
            .toast-info {
                background-color: #000000;
                color: #f0f0f0;
                border-left: 5px solid #3498db;
            }
            .toast-warning {
                background-color: #2b2b2b;
                color: #f0f0f0;
                border-left: 5px solid #f39c12;
            }
            .toast-error {
                background-color: #2b2b2b;
                color: #f0f0f0;
                border-left: 5px solid #e74c3c;
            }
        </style>
    </head>
    <body>
        <nav class="navbar navbar-expand-xl navbar-dark bg-dark fixed-top py-0">
            <div class="container">
                <a class="navbar-brand fw-normal ls-2" href="/">LINUXBRO</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav2"
                   aria-controls="nav2" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="nav2">
                    <ul class="navbar-nav me-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'our_story' %}">About Us</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="{% url 'contact' %}">Contact Us</a>
                        </li>
                    </ul>
                </div>
                {% if user.is_authenticated %}
                <div class="dropdown">
                    <a class="nav-link text-white d-flex align-items-center" href="#" id="accountDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        {% if user.author.profile_picture %}
                        <img src="{{ user.author.profile_picture.url }}" alt="{{ user.username }}" class="rounded-circle me-2" width="30" height="30" style="object-fit: cover;">
                        {% else %}
                        <span class="far fa-user-circle me-2 fs-4"></span>
                        {% endif %}
                        <span class="dropdown-toggle">{{ user.username|title }}</span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="accountDropdown">
                        <li><a class="dropdown-item" href="{% url 'my_profile' %}"><span class="fas fa-user me-2"></span>My Profile</a></li>
                        <li><a class="dropdown-item" href="{% url 'filter-search-results-slug' 'saved' %}"><span class="fas fa-bookmark me-2"></span>Saved Reads</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="{% url 'logout' %}"><span class="fas fa-sign-out-alt me-2"></span>Logout</a></li>
                    </ul>
                </div>
                {% else %}
                <a class="btn btn-sm my-2 my-sm-0 btn-outline-secondary" type="button" data-bs-toggle="modal" data-bs-target="#authModal">Login</a>
                {% endif %}
            </div>
        </nav>
        <main class="main" id="top">
            <div class="preloader" id="preloader" data-preloader>
                <div class="preloader-wrapper big active" data-preloader>
                    <div class="spinner-layer spinner-white-only">
                        <div class="circle-clipper left">
                            <div class="circle"></div>
                        </div>
                        <div class="gap-patch">
                            <div class="circle"></div>
                        </div>
                        <div class="circle-clipper right">
                            <div class="circle"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ============================================-->
            <!-- <section> begin ============================-->
            <section class="text-center overflow-hidden py-0 bg-dark" data-zanim-timeline="{}" data-zanim-trigger="scroll">
                <div class="container-fluid">
                    <div class="position-relative pt-10 pb-8">
                        <div class="header-text">
                            <div class="overflow-hidden">
                                <h1 class="display-3 fs-7 text-white fw-lighter ls-2" data-zanim-xs='{"duration":2,"delay":0}'>Contact Us</h1>
                            </div>
                            <div class="overflow-hidden">
                                <div class="d-flex justify-content-center" data-zanim-xs='{"duration":2,"delay":0.1}'>
                                    <nav aria-label="breadcrumb">
                                        <ol class="breadcrumb text-uppercase ls-2">
                                            <li class="breadcrumb-item"><a class="text-400 hover-color-white" href="{% url 'home' %}">Home</a></li>
                                            <li class="breadcrumb-item active text-white" aria-current="page">Contact Us</li>
                                        </ol>
                                    </nav>
                                </div>
                            </div>
                        </div>
                    </div>
                </div><!-- end of .container-->
            </section><!-- <section> close ============================-->
            <!-- ============================================-->

            <!-- ============================================-->
            <!-- <section> begin ============================-->
            <section id="contact">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-lg-6 mb-5 mb-lg-0 d-flex flex-column justify-content-between">
                            <div class="row">
                                <div class="col-12">
                                    <h5 class="mb-3">Connect With Us</h5>
                                </div>
                                <div class="col-auto mb-2 mb-sm-0" style="width: 190px">
                                    <div class="row">
                                        <div class="col-1"><span class="fas fa-location-arrow text-700"></span></div>
                                        <div class="col px-2">
                                            <p class="mb-1 text-700"><strong>{{ contact_info.company_name }}</strong></p>
                                            <p class="mb-0 text-600">{{ contact_info.address_line1 }}{% if contact_info.address_line2 %}<br />{{ contact_info.address_line2 }}{% endif %}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-auto" style="width: 205px">
                                    <div class="row mb-2 mb-sm-1">
                                        <div class="col-1"><span class="fas fa-phone me-2 text-700"> </span></div>
                                        <div class="col px-2">
                                            <a class="text-600" href="tel:{{ contact_info.phone1 }}">{{ contact_info.phone1 }}</a>
                                            {% if contact_info.phone2 %}<br /><a class="text-600" href="tel:{{ contact_info.phone2 }}">{{ contact_info.phone2 }}</a>{% endif %}
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-1"><span class="fas fa-envelope me-2 text-700"></span></div>
                                        <div class="col px-2"><a class="text-600" href="mailto:{{ contact_info.email }}">{{ contact_info.email }}</a></div>
                                    </div>
                                </div>
                            </div>
                            <div class="googlemap rounded data-map mt-4" data-latlng="{{ contact_info.map_latitude }},{{ contact_info.map_longitude }},{{ contact_info.map_zoom }}" data-scrollwheel="false" data-icon="{% static 'v2/img/map-marker.png' %}" data-zoom="{{ contact_info.map_zoom }}" data-theme="Default" style="min-height: 14.63rem;">
                                <div class="marker-content py-3">
                                    <h5>{{ contact_info.company_name }} Headquarters</h5>
                                    <p>{{ contact_info.address_line1 }}{% if contact_info.address_line2 %}<br />{{ contact_info.address_line2 }}{% endif %}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <h5 class="mb-3">Feel free to drop us a line!</h5>
                            <form id="contactForm" class="zform text-left" method="post">
                                {% csrf_token %}
                                <div class="form-group mb-3">
                                    <input id="contact-name" class="fs-0 form-control" type="text" name="name" placeholder="Your Name" required="required" />
                                </div>
                                <div class="form-group mb-3">
                                    <input id="contact-email" class="fs-0 form-control" type="email" name="email" placeholder="Email Address" required="required" />
                                </div>
                                <div class="form-group mb-3">
                                    <textarea id="contact-message" class="fs-0 form-control contact-message" name="message" rows="8" placeholder="Type your message here" required="required"></textarea>
                                </div>
                                <div class="zform-feedback d-grid">
                                    <button class="btn btn-dark hvr-sweep-top" type="submit">Give us a shot</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div><!-- end of .container-->
            </section><!-- <section> close ============================-->
            <!-- ============================================-->

        </main><!-- ===============================================-->
        <!--    End of Main Content-->
        <!-- ===============================================-->

        <!--===============================================-->
        <!--    Footer-->
        <!--===============================================-->

        <!-- ============================================-->
        <!-- <section> begin ============================-->
        <section class="bg-1100 py-6 pb-9 px-3 px-lg-0">
            <div class="container">
                <div class="row">
                    <div class="col-lg-4 pe-lg-4 mb-4 mb-lg-0">
                        <h5 class="text-white mb-3">{{ footer_content.mission_title }}</h5>
                        <p class="text-700">{{ footer_content.mission_text|linebreaks }}</p>
                        <ul class="list-inline mb-0">
                            <li class="list-inline-item me-0"><a class="text-900 hover-color-white pe-2" href="{{ footer_content.facebook_url }}"><span class="fab fa-facebook-f"></span></a></li>
                            <li class="list-inline-item me-0"><a class="text-900 hover-color-white px-2" href="{{ footer_content.twitter_url }}"><span class="fab fa-twitter"></span></a></li>
                            <li class="list-inline-item me-0"><a class="text-900 hover-color-white px-2" href="{{ footer_content.linkedin_url }}"><span class="fab fa-linkedin-in"></span></a></li>
                            <li class="list-inline-item me-0"><a class="text-900 hover-color-white px-2" href="{{ footer_content.github_url }}"><span class="fab fa-github"></span></a></li>
                        </ul>
                    </div>
                    <div class="col-lg-8">
                        <div class="row">
                            <div class="col-6 col-md-3 ps-lg-4 mb-4 mb-lg-0">
                                <h5 class="text-white mb-3">Company</h5>
                                <ul class="list-unstyled mb-0">
                                    <li class="mb-1"><a class="text-700 hover-color-white" href="{% url 'our_story' %}">About</a></li>
                                    <li class="mb-1"><a class="text-700 hover-color-white" href="{% url 'contact' %}">Contact</a></li>
                                    <li class="mb-1"><a class="text-700 hover-color-white" href="{% url 'home' %}">Blog</a></li>
                                </ul>
                            </div>
                            <div class="col-6 col-md-3 ps-4 mb-4 mb-lg-0">
                                <h5 class="text-white mb-3">Resources</h5>
                                <ul class="list-unstyled mb-0">
                                    <li class="mb-1"><a class="text-700 hover-color-white" href="{% url 'home' %}">Tutorials</a></li>
                                    <li class="mb-1"><a class="text-700 hover-color-white" href="{% url 'home' %}">Stories</a></li>
                                    {% if user.is_authenticated %}
                                    <li class="mb-1"><a class="text-700 hover-color-white" href="{% url 'my_profile' %}">My Profile</a></li>
                                    <li class="mb-1"><a class="text-700 hover-color-white" href="{% url 'filter-search-results-slug' 'saved' %}">Saved Reads</a></li>
                                    {% endif %}
                                </ul>
                            </div>
                            <div class="col-md-6 ps-md-4">
                                <h5 class="text-white mb-3">LATEST BLOGS</h5>
                                <ul class="list-unstyled mb-0">
                                    {% for story in popular_stories|slice:":3" %}
                                    <li class="mb-3">
                                        <a class="text-700 hover-color-white" href="{% url 'blog' story.uuid %}">{{ story.title }}</a>
                                        <p class="text-900 hover-color-white mb-0">{{ story.publication_date|date:"M d, Y" }}</p>
                                    </li>
                                    {% empty %}
                                    <li class="mb-3">
                                        <p class="text-700 mb-0">No blog posts yet.</p>
                                    </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div><!-- end of .container-->
        </section><!-- <section> close ============================-->
        <!-- ============================================-->

        <footer class="footer text-center bg-black py-3 position-absolute w-100 bottom-0">
            <div class="container">
                <div class="row justify-content-between">
                    <div class="col-12 col-md-auto mb-1 mb-md-0">
                        <p class="mb-0">Linux Bro &copy; {% now "Y" %}<span class="mx-2">|</span><span class="text-900 hover-color-white"> Empowering Tech Enthusiasts</span></p>
                    </div>
                    <div class="col-12 col-md-auto">
                        <p class="mb-0">Made with<span class="fas fa-heart mx-2"></span>by <a class="footer-link" href="{% url 'our_story' %}" target="_blank">Linux Bro Team</a></p>
                    </div>
                </div>
            </div>
        </footer>

        <script src="{% static 'v2/vendors/popper/popper.min.js'%}"></script>
        <script src="{% static 'v2/vendors/bootstrap/bootstrap.min.js'%}"></script>
        <script src="{% static 'v2/vendors/anchorjs/anchor.min.js'%}"></script>
        <script src="{% static 'v2/vendors/is/is.min.js'%}"></script>
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyARdVcREeBK44lIWnv5-iPijKqvlSAVwbw&callback=initMap" async></script>
        <script src="{% static 'v2/vendors/fontawesome/all.min.js'%}"></script>
        <script src="{% static 'v2/vendors/lodash/lodash.min.js'%}"></script>
        <script src="{% static 'v2/vendors/imagesloaded/imagesloaded.pkgd.min.js'%}"></script>
        <script src="{% static 'v2/vendors/gsap/gsap.js'%}"></script>
        <script src="{% static 'v2/vendors/gsap/customEase.js'%}"></script>
        <script src="{% static 'v2/js/theme.js'%}"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
        <script>
            toastr.options = { "closeButton": false, "debug": false, "newestOnTop": true,
                    "progressBar": false, "positionClass": "toast-top-right", "preventDuplicates": true,
                    "onclick": null, "showDuration": "300", "hideDuration": "1000", "timeOut": "2000",
                    "extendedTimeOut": "1000", "showEasing": "swing", "hideEasing": "linear",
                    "showMethod": "fadeIn", "hideMethod": "fadeOut" 
            };

            // Handle contact form submission
            $(document).ready(function() {
                $('#contactForm').on('submit', function(e) {
                    e.preventDefault();
                    
                    var form = $(this);
                    var submitBtn = form.find('button[type="submit"]');
                    var originalText = submitBtn.html();
                    
                    // Disable submit button
                    submitBtn.prop('disabled', true).html('Sending...');
                    
                    $.ajax({
                        url: "{% url 'contact_submit' %}",
                        type: 'POST',
                        data: {
                            'name': $('#contact-name').val(),
                            'email': $('#contact-email').val(),
                            'message': $('#contact-message').val(),
                            'csrfmiddlewaretoken': $('[name=csrfmiddlewaretoken]').val()
                        },
                        success: function(response) {
                            if (response.success) {
                                toastr.success(response.message);
                                // Reset form
                                form[0].reset();
                            } else {
                                if (response.error === 'rate_limit_exceeded') {
                                    toastr.error(response.message);
                                } else {
                                    toastr.error(response.message || 'Failed to send message. Please try again.');
                                }
                            }
                            submitBtn.prop('disabled', false).html(originalText);
                        },
                        error: function(xhr) {
                            var response = xhr.responseJSON;
                            if (response && response.error === 'rate_limit_exceeded') {
                                toastr.error(response.message || 'You have reached the daily message limit. Please try again tomorrow.');
                            } else {
                                toastr.error(response ? response.message : 'An error occurred. Please try again.');
                            }
                            submitBtn.prop('disabled', false).html(originalText);
                        }
                    });
                });
            });
        </script>

