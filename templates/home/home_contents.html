{% extends 'home/index.html' %}
{% load static %}
{% block content %}
<!-- Header Image -->
<div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
    <div class="carousel-inner">
        <div class="carousel-item active">
            <div class="blurred-container">
                <div class="img-src" style="background-image: url('{% static 'images/linux_bro_banner3.png' %}');"></div>
            </div>
        </div>
        <!-- Additional carousel items can be uncommented as needed -->
        <!--
        <div class="carousel-item">
            <div class="blurred-container">
                <div class="img-src" style="background-image: url('{% static 'images/banner2.jpg' %}');"></div>
            </div>
        </div>
        <div class="carousel-item">
            <div class="blurred-container">
                <div class="img-src" style="background-image: url('{% static 'images/banner5.jpg' %}');"></div>
            </div>
        </div>
        -->
    </div>
</div>

<!-- User Page Main Content -->
<div class="main pb-4">
    <div class="bg-white">
        <div class="container">
            <div class="row">
                <!-- Latest Articles Column -->
                <div class="col-md-8 latest-section">
                    <h2>Latest</h2>
                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" id="for-you-tab" data-toggle="tab" href="#for-you" role="tab" aria-controls="for-you" aria-selected="true">For You</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="following-tab" data-toggle="tab" href="#following" role="tab" aria-controls="following" aria-selected="false">Following</a>
                        </li>
                    </ul>

                    <div class="tab-content" id="myTabContent">
                        <div class="tab-pane fade show active" id="for-you" role="tabpanel" aria-labelledby="for-you-tab">
                            <!-- For You Content -->
                            {% for story in foryou_stories %}
                                <div class="blog-card">
                                    <div class="row no-gutters">
                                        <div class="col-md-8 blog-card-body">
                                            <a class="blog-card-author" href="{% url 'blog' story.uuid %}">
                                                <img src="{% static 'images/profile.jpg' %}" alt="Author Image" class="author-img">
                                                {{ story.author.user.username }}
                                            </a>
                                            <h3 class="blog-card-title">{{ story.title }}</h3>
                                            <h6 class="blog-card-subtitle">
                                                {{ story.subtitle }}
                                            </h6>
                                        </div>
                                        <div class="col-md-4 d-flex justify-content-center align-items-center">
                                            <img src="{{ story.cover_image.url }}" alt="Blog Image" class="blog-img">
                                        </div>
                                    </div>
                                </div>
                            {% empty %}
                                <p>No stories available.</p>
                            {% endfor %}
                        </div>

                        <div class="tab-pane fade" id="following" role="tabpanel" aria-labelledby="following-tab">
                            <!-- Following Content -->
                            <!-- For You Content -->
                            {% for story in following_stories %}
                                <div class="blog-card">
                                    <div class="row no-gutters">
                                        <div class="col-md-8 blog-card-body">
                                            <a class="blog-card-author" href="{% url 'blog' story.uuid %}">
                                                <img src="{% static 'images/profile.jpg' %}" alt="Author Image" class="author-img">
                                                {{ story.author.user.username }}
                                            </a>
                                            <h3 class="blog-card-title">{{ story.title }}</h3>
                                            <h6 class="blog-card-subtitle">
                                                {{ story.subtitle }}
                                            </h6>
                                        </div>
                                        <div class="col-md-4 d-flex justify-content-center align-items-center">
                                            <img src="{{ story.cover_image.url }}" alt="Blog Image" class="blog-img">
                                        </div>
                                    </div>
                                </div>
                            {% empty %}
                                <p class="mt-3 pl-2">No stories available.</p>
                            {% endfor %}
                        </div>
                    </div>
                </div>

                <!-- Trending Articles Column -->
                <div class="col-md-4 trending-section">
                    <h2>Trending</h2>
                    <ul class="list-unstyled mt-4">
                        {% for story in trending_stories %}
                        <li class="mb-3">
                            <a href="{% url 'blog' story.uuid %}" class="d-block mb-1 trending-link">
                                <span class="title">{{story.title}}</span>
                            </a>
                            <img src="{% static 'images/profile.jpg' %}" alt="Author 1" class="author-img">
                            <a href="{% url 'author_profile' story.author.uuid %}" class="text-secondary"><small class="author">by </small>{{story.author}}</a>
                        </li>
                        {% endfor %}
                        <!-- Repeat for more trending articles -->
                    </ul>
                </div>
            </div>
        </div>
        <!-- Technology Logos Section -->
        <div class="tech-logos-section">
          <h2 class="tech-logos-title">Tutorials by Technologies</h2>
          <div class="tech-logos-container">
              <a href="{% url 'blog-list-slug' 'django' %}" class="tech-logo-link">
                  <img src="{% static 'images/django-logo-positive.png' %}?text=Django" alt="Django Logo" class="tech-logo">
              </a>
              <a href="{% url 'blog-list-slug' 'aws' %}" class="tech-logo-link">
                  <img src="{% static 'images/Amazon_Web_Services-Logo.wine.png' %}?text=AWS" alt="AWS Logo" class="tech-logo">
              </a>
              <a href="{% url 'blog-list-slug' 'angular' %}"  class="tech-logo-link">
                  <img src="{% static 'images/4373284_angular_logo_logos_icon.png' %}?text=Angular" alt="Angular Logo" class="tech-logo">
              </a>
          </div>
      </div>

      <!-- Recently Viewed Blogs Section -->
      <div class="container">
          <div class="row">
              <div class="col-12 mt-3">
                {% if viewed_stories %}
                  <h3>Recently Viewed Blogs</h3>
                {% endif %}
              </div>
          </div>
          <div class="row">
            {% for story in viewed_stories %}
              <div class="col-12 col-md-4">
                  <div class="card recent-view">
                      <img src="{{ story.cover_image.url }}" class="card-img-top p-2" alt="Blog 1">
                      <div class="card-body">
                          <h5 class="card-title">{{story.title}}</h5>
                          <p class="card-text">{{story.subtitle}}</p>
                          <a href="{% url 'blog' story.uuid %}" class="btn btn-primary mt-1">Read More</a>
                      </div>
                  </div>
              </div>
            {% endfor %}
              <!-- Repeat for more recently viewed blogs -->
          </div>
      </div>
    </div>
</div>
{% endblock %}